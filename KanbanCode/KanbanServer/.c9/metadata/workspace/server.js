{"changed":false,"filter":false,"title":"server.js","tooltip":"/server.js","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":31,"column":55},"action":"insert","lines":["var express = require('express');","var mongoose = require('mongoose');","var bodyParser = require('body-parser');","","var app = express();","","//app.use(bodyParser.urlencoded({extended: true}));","app.use(bodyParser.json());","app.use(function(req, res, next) {","\tres.header('Access-Control-Allow-Origin', '*');","\tres.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');","\tres.header('Access-Control-Allow-Headers', 'Content-Type');","\tnext();","});","","app.use('/api', require('./app/dispatcher'));","","mongoose.connection","\t.on('error', function(err) {console.log(err.message)})","\t.on('disconnected', function() {","\t\tconsole.log('Mongoose connnection to DB has been disconnected');","\t})","\t.on('connected', function() {","\t\tapp.listen(8000);","\t});","","var closeDBConnection = function() {","\tmongoose.connection.close(function() { process.exit(0); });","};","process.on('SIGINT', closeDBConnection).on('SIGTERM', closeDBConnection);","","mongoose.connect(require('./config/db').connectString);"],"id":1}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["//app.use(bodyParser.urlencoded({extended: true}));",""],"id":2}],[{"start":{"row":22,"column":2},"end":{"row":22,"column":19},"action":"remove","lines":["app.listen(8000);"],"id":3},{"start":{"row":22,"column":2},"end":{"row":22,"column":47},"action":"insert","lines":["app.listen(process.env.PORT, process.env.IP);"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":22,"column":47},"end":{"row":22,"column":47},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1469517046183}