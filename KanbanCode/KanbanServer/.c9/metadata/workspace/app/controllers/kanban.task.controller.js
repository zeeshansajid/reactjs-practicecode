{"filter":false,"title":"kanban.task.controller.js","tooltip":"/app/controllers/kanban.task.controller.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":73,"column":2},"action":"insert","lines":["var Card = require('../models/kanban.card.model');","","var create = function(req, res) {","\tCard.findById(req.params.card_id, function(err, card) {","\t\tif (err) {","\t\t\tres.status(404).json({error: err.message});","\t\t} else {","\t\t\tif (card !== null) {","\t\t\t\tcard.addTask(req.body.taskname);","","\t\t\t\tcard.save(function(err) {","\t\t\t\t\tif (err) {","\t\t\t\t\t\tres.status(400).json({error: err.message});","\t\t\t\t\t} else {","\t\t\t\t\t\tres.status(201).json(card);","\t\t\t\t\t}","\t\t\t\t});","\t\t\t} else {","\t\t\t\tres.status(404).json({error: 'card not found'});","\t\t\t}","\t\t}","\t});","};","","var update = function(req, res) {","\tCard.findById(req.params.card_id, function(err, card) {","\t\tif (err) {","\t\t\tres.status(404).json({error: err.message});","\t\t} else {","\t\t\tif (card !== null) {","\t\t\t\tcard.updateTask(req.params.task_id,","\t\t\t\t\t\t\t\treq.body.taskstatus);","","\t\t\t\tcard.save(function(err) {","\t\t\t\t\tif (err) {","\t\t\t\t\t\tres.status(400).json({error: err.message});","\t\t\t\t\t} else {","\t\t\t\t\t\tres.json(card);","\t\t\t\t\t}","\t\t\t\t});","\t\t\t} else {","\t\t\t\tres.status(404).json({error: 'card not found'});","\t\t\t}","\t\t}","\t});","};","","var remove = function(req, res) {","\tCard.findById(req.params.card_id, function(err, card) {","\t\tif (err) {","\t\t\tres.status(404).json({error: err.message});","\t\t} else {","\t\t\tif (card !== null) {","\t\t\t\tcard.removeTask(req.params.task_id);","","\t\t\t\tcard.save(function(err) {","\t\t\t\t\tif (err) {","\t\t\t\t\t\tres.status(400).json({error: err.message});","\t\t\t\t\t} else {","\t\t\t\t\t\tres.status(204).json({confirmation: 'success'});","\t\t\t\t\t}","\t\t\t\t});","\t\t\t} else {","\t\t\t\tres.status(404).json({error: 'card not found'});","\t\t\t}","\t\t}","\t});","};","","module.exports = {","\tcreate: create,","\tupdate: update,","\tremove: remove","};"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":40,"column":11},"end":{"row":40,"column":11},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1469516002359,"hash":"4bcb791e8d09f3a33ccc029d4f290a97d9ecf2b9"}